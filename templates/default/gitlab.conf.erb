<VirtualHost *:80>
  ServerName <%= @params[:server_name] %>
  ServerAlias <% @params[:server_aliases] %>
  DocumentRoot <%= @params[:docroot] %>

  RackBaseURI /
  RailsEnv <%= @params[:rails_env] %>

  <Directory <%= @params[:docroot] %>>
    Options FollowSymLinks
    AllowOverride None
    <% if node[:apache][:version].to_f >= 2.3 %>
    Require all granted
    <% else %>
    Order allow,deny
    Allow from all
    <% end %>
  </Directory>

  LogLevel info
  ErrorLog <%= node[:apache][:log_dir] %>/<%= @params[:name] %>-error.log
  CustomLog <%= node[:apache][:log_dir] %>/<%= @params[:name] %>-access.log combined
</VirtualHost>
